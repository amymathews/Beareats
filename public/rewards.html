<!DOCTYPE html>
<html>
<head>
    <title>User Profile - Reward System</title>
    <link rel="stylesheet" type="text/css" href="rstyles.css">
    <link href="https://fonts.googleapis.com/css2?family=Homemade+Apple&display=swap" rel="stylesheet">
</head>
<body>
    <div class="app">
		<div class="menu-toggle">
			<div class="hamburger">
				<span></span>
			</div>
		</div>
        
        <!-- THIS IS THE SIDEBAR CODE -->
        <style>

            .sidebar {
                flex: 1 1 0;
                max-width: 245px;
                min-width: 245px;
                padding: 2rem 1rem 1rem 1rem;
                background-color: #003262;
                border-color: black;
            }

            .sidebar h3 {
                color: #707793;
                font-size: 0.90rem;
                text-transform: uppercase;
                margin-bottom: 0.5em;
            }

            .sidebar .menu {
                margin: 0 -1rem;
                position: fixed;
            }

            .sidebar .menu .menu-item {
                display: block;
                padding: 1em;
                color: #FFF;
                text-decoration: none;
                transition: 0.2s linear;
                margin: 5%;
                font-size: 2.5vh;
                font-weight: 100;
            }

            .sidebar .menu .menu-item:hover,
            .sidebar .menu .menu-item.is-active {
                color: #FDB515;
                border-right: 5px solid #FDB515;
            }

            .sidebar .menu .menu-item:hover {
                border-right: 5px solid #FDB515;
            }

            .content {
                flex: 1 1 0;
                padding: 2rem;
            }

            .content h1 {
                color: #3C3F58;
                font-size: 2.5rem;
                margin-bottom: 1rem;
            }

            .content p {
                color: #707793;
            }

            @media (max-width: 600px) {
                .sidebar {
                    max-width: 200px;
                }
            }

            @media (max-width: 850px) {
                .menu-toggle {
                    display: block;
                }
                .content {
                    padding-top: 8rem;
                }
                .sidebar {
                    position: fixed;
                    top: 0;
                    left: -300px;
                    height: 100vh;
                    width: 100%;
                    max-width: 200px;
                    transition: 0.2s linear;
                }
                
                .sidebar.is-active {
                    left: 0;
                }
                
                .profile-picture {
                width: 100%;
                height: 100%;
                border-radius: 9999px;
                }
            }
            .posts_container {
                max-width: 90vw;
                font-family: sans-serif;
                margin: 0 auto;
                margin-left: 7%;
            }
            .post img {
                width: 100%;
                height: 180px;
                object-fit: cover;
            }
            .Post_container {
                display: grid;
            }

            .popup {
        display: none;
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        padding: 20px;
        background-color: #003262; /* Change this to the desired blue color */
        color: white;
        border-radius: 10px;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        z-index: 1000;
    }

    /* Button to close the pop-up */
    .popup-close {
        position: absolute;
        top: 10px;
        right: 10px;
        cursor: pointer;
    }
            /* Style for the point bar */
    .point-bar {
        width: 100%;
        height: 10px;
        background-color: #ccc; /* Background color of the point bar */
        margin-top: 10px;
        border-radius: 5px;
    }

    /* Style for the filled points in the point bar */
    .points {
        height: 100%;
        width: 50%; /* This value will determine the fill percentage */
        background-color: #fddb15; /* Color of the filled points */
        border-radius: 5px;
    }
        </style>
        
		<aside class="sidebar">
		
			<nav class="menu">
                <div style="display: flex;">
                    <img src="../static/amir.png" style="height: 5vh ;width: 3vw;margin-left: 5% ; margin-top: 9%; border-radius: 100%;">
                <a href="profile-page.html" class="menu-item">Profile</a>
                </div>
                <div style="display: flex;">
                    <img src="../static/home-icon.png" style="height: 5vh ;width: 3vw; margin-left: 5%; margin-top: 7%;" >
				    <a href="hub.html" class="menu-item is-active">Home</a>
                </div>
                <div style="display: flex;">
                    <img src="static/new-post-icon.png" style="height: 5vh ;width: 3vw; margin-left: 5%; margin-top: 8%;" >
				<a href="makeapost.html" class="menu-item">New Post</a>
                </div>
                <div style="display: flex;">
                    <img src="static/reward-icon.png" style="height: 5vh ;width: 3vw; margin-left: 5%; margin-top: 8%;" >
				<a href="rewards.html" class="menu-item">Rewards</a>
                </div>
                <div style="display: flex;">
                    <img src="static/save-icon.png" style="height: 5vh ;width: 3vw; margin-left: 5%; margin-top: 8%;" >
				<a href="#" class="menu-item">Saved</a>
                </div>
                <div style="display: flex;">
                    <img src="static/settings-icon.png" style="height: 5vh ;width: 3vw; margin-left: 5%; margin-top: 8%;" >
                <a href="#" class="menu-item">Settings</a>
                </div>
                <div style="display: flex;">
                    <img src="static/most-liked.png" style="height: 5vh ;width: 3vw; margin-left: 5%; margin-top: 9%;" >    
                <a href="#" class="menu-item" style="padding-left: 4%;">Most Liked Posts</a>
                </div>
                <div style="display: flex;"">
                    <img src="static/meter.png" style="height: 5vh ;width: 3vw; margin-left: 5%; margin-top: 9%;">    
                    <a href="#" class="menu-item" style="margin-left: 2%;"> RSF Meter </a>
                </div>       
                <div class="scraped-content"> </div>                         
			</nav>
		</aside>

        <script>
            const menu_toggle = document.querySelector('.menu-toggle');
            const sidebar = document.querySelector('.sidebar');
    
            menu_toggle.addEventListener('click', () => {
                menu_toggle.classList.toggle('is-active');
                sidebar.classList.toggle('is-active');
            });
        </script>

        <!-- THIS IS THE SIDEBAR CODE -->
    </div>

    <div class="profile">
        <h1>üèÜRewardsüèÜ</h1>
        <div class="profile-info">
            <!-- Profile picture and user info -->
        </div>
        
        <div class="badges">
            <div style= "display:flex; text-align: center; font-size: 3vh; margin-top: 2%; font-weight: bold;">
                Your current point:
                
                <p id="current-points">0 points</p>
            </div>
            <div class="point-bar">
                <div class="points"></div>
            </div>
        </div>

        <div style= "display:flex; text-align: center; justify-content: center; font-size: 3vh; margin-top: 2%; font-weight: bold;">
            Your Achievements
        </div>
        <div class = "rewards-display" style="display: flex; z-index: -1;">
            <div class = "reward-info" style="margin-left: 0%;">
                <img src="static/fire-icon.png" class="reward-icon" style="height: 15vh; width: 10vw; margin: 2%; margin-top: 4%; z-index: -1;">
                <span class="reward-info-text">Amir has logged in 10 days in a row!</span>
            </div>
            <div class = "reward-info"> 
                <img src="static/diet-icon.png" class="reward-icon" style="height: 15vh; width: 10vw;margin: 2%; margin-top: 4%">
                <span class="reward-info-text">Amir has logged in 10 days in a row!</span>
            </div>
            <div class = "reward-info">
                <img src="static/leaf-icon.png" class="reward-icon" style="height: 15vh; width: 10vw;margin: 2%; margin-top: 4%">
                <span class="reward-info-text">Amir has logged in 10 days in a row!</span>
            </div>
            <div class = "reward-info">
                <img src="static/steak-icon.png" class="reward-icon" style="height: 15vh; width: 10vw;margin: 2%; margin-top: 4%">
                <span class="reward-info-text">Amir has logged in 10 days in a row!</span>
            </div>
            <div class = "reward-info">
                <img src="static/vegetables-icon.png" class="reward-icon" style="height: 15vh; width: 10vw;margin: 2%; margin-top: 4%">
                <span class="reward-info-text">Amir has logged in 10 days in a row!</span>
            </div>

            

        </div>

        <div class="roadmap">
            <h2>Missions</h2>
            <ul>
                <li>make a new post (10 points)</li>
                <li>like 10 posts (10 points)</li>
                <li>wrtie 10 points (10 points)</li>
                <!-- Add more reward items as needed -->
            </ul>
        </div>        
        
        <div class="roadmap">
            <h2>More Rewards</h2>
            <ul>
                <li>Blue Badge (600 points)</li>
                <li>Bear Badge (600 points)</li>
                <li>RSF weight room free pass (1000 points)</li>
                <!-- Add more reward items as needed -->
            </ul>
        </div>
        <div class="roadmap">
            <h2>Available Rewards</h2>
            <form id="rewards-form">
                <div class="reward-item">
                    <label for="reward1">
                        <input type="radio" id="reward1" name="reward" value="100"> <!-- Assign a value to represent the points needed -->
                        Free Jamba Juice acai bowl (100 points)
                    </label>
                </div>
                <div class="reward-item">
                    <label for="reward2">
                        <input type="radio" id="reward2" name="reward" value="200"> <!-- Assign a value to represent the points needed -->
                        Free Mezzo Salad (200 points)
                    </label>
                </div>
                <!-- Add more reward items as needed -->
            </form>
        </div>
        
        <button id="claim-button" class="claim-button">Claim Reward</button>
    </div>

    <div class="popup">
        <span class="popup-close">&times;</span>
        <p id="popup-message">üéâCongrats! Your reward has been sent to your email!üéâ</p>
    </div>

    <script>
        const claimButton = document.getElementById('claim-button');
        const popup = document.querySelector('.popup');
        const popupCloseButton = document.querySelector('.popup-close');
    
        claimButton.addEventListener('click', () => {
            // Simulate sending rewards to email (replace this with actual code to send the email)
            sendRewardEmail();
    
            // Show the pop-up message
            popup.style.display = 'block';
        });
    
        popupCloseButton.addEventListener('click', () => {
            // Close the pop-up when the close button is clicked
            popup.style.display = 'none';
        });
    
        function sendRewardEmail() {
            // Replace this with your actual code to send the email
            // You might use an AJAX request or a fetch to communicate with a backend
            // to send the email containing the rewards.
        }

// Initialize the user's initial points (replace with your actual value)
let userPoints = 500; // Initial value
const maxPoints = 1000; // Maximum points value

// Calculate the percentage of user's points relative to the maximum points
const pointsPercentage = (userPoints / maxPoints) * 100;

// Select the points bar and set its width
const pointsBar = document.querySelector('.points');
pointsBar.style.width = `${pointsPercentage}%`;

// Set the initial value of the current points element
const currentPointsElement = document.getElementById('current-points');
currentPointsElement.textContent = `${userPoints} points`;

claimButton.addEventListener('click', () => {
    // Simulate sending rewards to email (replace this with actual code to send the email)
    sendRewardEmail();

    // Deduct points based on the selected reward only when the button is clicked
    const selectedReward = document.querySelector('input[name="reward"]:checked');
    if (selectedReward) {
        const rewardValue = parseInt(selectedReward.value);
        updatePoints(rewardValue);
    }

    // Show the pop-up message
    popup.style.display = 'block';
});

    // Function to update points based on selected reward value
    function updatePoints(rewardValue) {
        if (userPoints >= rewardValue) {
        userPoints -= rewardValue;} // Deduct the reward value from user's points
        
        // Ensure the user's points don't go below 0
        userPoints = Math.max(userPoints, 0);
        
        currentPointsElement.textContent = `${userPoints} points`;

        // Update the width of the point bar based on the user's points value
        const pointsPercentage = (userPoints / maxPoints) * 100;
        pointsBar.style.width = `${pointsPercentage}%`;
    }

    claimButton.addEventListener('click', () => {
    // Simulate sending rewards to email (replace this with actual code to send the email)
    sendRewardEmail();

    // Deduct points based on the selected reward only when the button is clicked
    const selectedReward = document.querySelector('input[name="reward"]:checked');
    if (selectedReward) {
        const rewardValue = parseInt(selectedReward.value);
        
        if (userPoints >= rewardValue) {
            // updatePoints(rewardValue);
            // Show the pop-up message for successful claim
            popupMessage.textContent = "üéâCongrats! Your reward has been sent to your email!üéâ";
        } else {
            // Show the pop-up message for insufficient points
            const popupMessageElement = document.getElementById('popup-message');
            popupMessageElement.textContent = "I'm sorry, but you need more points to claim the reward.";
        }
    }

    // Show the pop-up
    popup.style.display = 'block';
});


    </script>
    
</body>
</html>
